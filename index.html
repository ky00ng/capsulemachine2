<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Onstyle Sweet Claw Machine</title>

<style>
:root {
    /* 1. ìƒ‰ê° ë³€ê²½: í•‘í¬ë ˆë“œ ì œê±° ë° ì—°í•œ ì˜ë¡œìš°+í•‘í¬ ê·¸ë¼ë°ì´ì…˜ ì ìš© */
    --primary-purple: #a29bfe;
    --light-purple: #efecff;
    --soft-pink: #fab1a0;
    --pastel-gradient: linear-gradient(to right, #fff9ad, #ffd1ff); /* ì˜ë¡œìš°-í•‘í¬ ê·¸ë¼ë°ì´ì…˜ */
    --accent-peach: #ffda79;
    --machine-body: #f8f9fa;
    --text-color: #5d5d5d;
}

body {
    margin: 0; display: flex; justify-content: center; align-items: center;
    height: 100vh; background: linear-gradient(135deg, #fceaff 0%, #e8f3ff 100%);
    font-family: 'Pretendard', sans-serif; color: var(--text-color); overflow: hidden;
}

.machine-wrap {
    width: 450px; height: 750px; background: var(--machine-body);
    border: 12px solid var(--primary-purple); border-radius: 40px;
    box-shadow: 0 20px 60px rgba(162, 155, 254, 0.4), inset 0 0 10px rgba(0,0,0,0.05);
    display: flex; flex-direction: column; position: relative;
}

.header {
    height: 80px; 
    background: var(--pastel-gradient); /* ì—°í•œ ì˜ë¡œìš°-í•‘í¬ ê·¸ë¼ë°ì´ì…˜ */
    display: flex; justify-content: center; align-items: center;
    font-size: 32px; font-weight: 900; letter-spacing: 5px; color: #7d5fff;
    border-bottom: 5px solid var(--primary-purple);
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
}

.game-window {
    flex-grow: 1; position: relative; background: #fff;
    overflow: hidden; box-shadow: inset 0 0 30px rgba(162, 155, 254, 0.2);
}

/* ì§‘ê²Œ ë””ìì¸ */
#claw-arm {
    position: absolute; top: 0; left: 50%;
    width: 6px; height: 40px;
    background: linear-gradient(to right, #ccc, #eee, #ccc);
    transform: translateX(-50%);
    transition: left .25s ease-out;
    z-index: 100;
}

#claw-head {
    position: absolute; bottom: -12px; left: 50%;
    width: 90px; height: 80px;
    transform: translateX(-50%);
}

.claw-core {
    position: absolute; top: 0; left: 50%;
    width: 20px; height: 20px;
    background: radial-gradient(circle, #fff, #999);
    border-radius: 50%; transform: translateX(-50%);
}

.hook {
    position: absolute; width: 14px; height: 60px;
    background: linear-gradient(to bottom, #eee, #888);
    border-radius: 0 0 14px 14px;
    top: 12px; transform-origin: top;
    transition: transform .5s cubic-bezier(.19,1,.22,1);
}

.hook-left { left: 8px; transform: rotate(-45deg); }
.hook-right { right: 8px; transform: rotate(45deg); }
.grabbing .hook-left { transform: rotate(-15deg); }
.grabbing .hook-right { transform: rotate(15deg); }

/* ìº¡ìŠ ì• ë‹ˆë©”ì´ì…˜ */
.capsule {
    position: absolute; width: 50px; height: 50px; border-radius: 50%;
    bottom: 20px;
    box-shadow: inset -5px -5px 10px rgba(0,0,0,0.15), 0 5px 10px rgba(0,0,0,0.1);
    border: 2px solid rgba(255,255,255,0.8);
    z-index: 50;
    animation: bounce 3s infinite ease-in-out;
}

.capsule::after {
    content: ''; position: absolute; top: 5px; left: 10px;
    width: 12px; height: 6px; background: rgba(255,255,255,0.6);
    border-radius: 50%; transform: rotate(-20deg);
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* í•˜ë‹¨ ì¡°ì‘ ì˜ì—­ */
.footer {
    height: 140px; background: var(--light-purple);
    display: flex; flex-direction: column; justify-content: space-between; align-items: center;
    border-top: 4px solid var(--primary-purple);
    padding: 15px 0;
}

/* ì¡°ì‘ ë²„íŠ¼ ë¹„ì£¼ì–¼ */
.controls-visual {
    display: flex; align-items: center; gap: 80px; margin-bottom: 10px;
}
.joystick {
    width: 40px; height: 40px; background: var(--accent-peach); border-radius: 50%;
    position: relative; box-shadow: 0 4px 0 #d9ac36;
}
.joystick::before {
    content: ''; position: absolute; top: 50%; left: 50%;
    width: 10px; height: 50px; background: #aaa;
    transform: translate(-50%, -100%); border-radius: 5px;
}
.push-button {
    width: 50px; height: 50px; background: #ffbebe; border-radius: 50%;
    box-shadow: 0 4px 0 #e89b9b; display: flex; align-items: center; justify-content: center;
    font-weight: bold; font-size: 11px; color: #fff;
}

/* 2. ì•ˆë‚´ ì¢…ì´ ë””ìì¸ (í•œêµ­ì–´ ë³€ê²½) */
.guide-paper {
    background: #fff; color: #7d5fff; padding: 6px 22px;
    transform: rotate(-1deg); border: 1px solid #eee;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
    font-size: 14px; font-weight: bold; margin-bottom: 5px;
}

/* ê²°ê³¼ ëª¨ë‹¬ (í•œêµ­ì–´ ë³€ê²½) */
.overlay {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(162, 155, 254, 0.3); backdrop-filter: blur(4px); z-index: 200;
}

.modal {
    display: none; position: fixed; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 320px; background: white; padding: 40px 25px;
    border-radius: 30px; text-align: center; z-index: 201;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
}

.ticket-reward { font-size: 26px; font-weight: 900; color: #7d5fff; margin: 20px 0; }
.btn-reset {
    background: var(--pastel-gradient); color: #7d5fff; border: 1px solid #7d5fff;
    padding: 14px 40px; border-radius: 30px; font-weight: bold; cursor: pointer;
}
</style>
</head>

<body>

<div class="machine-wrap">
    <div class="header">Onstyle</div>
    <div class="game-window" id="game-window">
        <div id="claw-arm">
            <div id="claw-head">
                <div class="claw-core"></div>
                <div class="hook hook-left"></div>
                <div class="hook hook-right"></div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <div class="controls-visual">
            <div class="joystick"></div>
            <div class="push-button">ë½‘ê¸°</div>
        </div>
        <div class="guide-paper">
            ğŸ•¹ï¸ ë°©í–¥í‚¤ë¡œ ì´ë™í•˜ê³  ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ë½‘ìœ¼ì„¸ìš”!
        </div>
    </div>
</div>

<div class="overlay" id="overlay"></div>
<div class="modal" id="modal">
    <div style="font-size: 40px;">ğŸŠ</div>
    <div style="font-weight: 900; color: #7d5fff; margin-top:10px; font-size: 20px;">ì¶•í•˜í•©ë‹ˆë‹¤!</div>
    <div class="ticket-reward" id="coupon-name">-</div>
    <button class="btn-reset" onclick="location.reload()">ì¿ í° ë‹¤ìš´ë¡œë“œ</button>
</div>

<script>
const arm = document.getElementById('claw-arm');
const windowArea = document.getElementById('game-window');
const modal = document.getElementById('modal');
const overlay = document.getElementById('overlay');
const couponName = document.getElementById('coupon-name');

let posX = 50, isMoving = false, currentHeight = 40;

const rewards = ['5% í• ì¸ ì¿ í°', '10% í• ì¸ ì¿ í°', '1,000ì› í• ì¸ ì¿ í°', 'ë¬´ë£Œ ë°°ì†¡ê¶Œ ğŸš›'];
// ì•Œë¡ë‹¬ë¡ ìº”ë”” ìƒ‰ìƒë“¤
const colors = ['#ffeaa7', '#fab1a0', '#74b9ff', '#55efc4', '#a29bfe', '#fd79a8', '#ffda79', '#dff9fb'];
const capsules = [];

function init() {
    for (let i = 0; i < 8; i++) {
        const cap = document.createElement('div');
        cap.className = 'capsule';
        cap.style.left = (40 + i * 46) + 'px';
        cap.style.backgroundColor = colors[i % colors.length];
        cap.style.animationDelay = (i * 0.2) + 's';
        windowArea.appendChild(cap);
        capsules.push({ el: cap });
    }
}

window.addEventListener('keydown', e => {
    if (isMoving) return;
    if (e.key === 'ArrowLeft') { posX = Math.max(10, posX - 3.5); arm.style.left = posX + '%'; }
    else if (e.key === 'ArrowRight') { posX = Math.min(90, posX + 3.5); arm.style.left = posX + '%'; }
    else if (e.code === 'Space') { isMoving = true; performAction(); }
});

function performAction() {
    const maxHeight = windowArea.clientHeight - 95;
    let down = setInterval(() => {
        currentHeight += 2;
        arm.style.height = currentHeight + 'px';
        if (currentHeight >= maxHeight) {
            clearInterval(down);
            setTimeout(() => arm.classList.add('grabbing'), 120);
            const caught = checkCollision();
            if (caught) {
                caught.style.animation = "none";
                caught.style.transition = "none";
                caught.style.bottom = "-8px";
                caught.style.left = "50%";
                caught.style.transform = "translateX(-50%)";
                document.getElementById('claw-head').appendChild(caught);
            }
            setTimeout(() => {
                let up = setInterval(() => {
                    currentHeight -= 2.5;
                    arm.style.height = currentHeight + 'px';
                    if (currentHeight <= 40) {
                        clearInterval(up);
                        showResult(caught);
                    }
                }, 20);
            }, 700);
        }
    }, 20);
}

function checkCollision() {
    const armRect = arm.getBoundingClientRect();
    const mid = armRect.left + armRect.width / 2;
    let target = null;
    capsules.forEach(c => {
        const r = c.el.getBoundingClientRect();
        if (Math.abs(mid - (r.left + r.width / 2)) < 28) target = c.el;
    });
    return target;
}

function showResult(win) {
    overlay.style.display = 'block';
    modal.style.display = 'block';
    couponName.innerText = win ? rewards[Math.floor(Math.random() * rewards.length)] : "ì•„ì‰¬ì›Œìš”! ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš” ğŸ¯";
}

init();
</script>

</body>
</html>